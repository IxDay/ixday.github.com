<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <meta name="generator" content="Hugo 0.42.2" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link rel='stylesheet' id='oswald-css'  href='//fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all'>
  <link rel="stylesheet" href="http://ixday.github.io/css/style.css" type='text/css' media='all'>
  <link rel="stylesheet" href="http://ixday.github.io/css/pygment.css" type='text/css' media='all'>
  
  <title>Not today... - </title>
  <meta property='og:title' content=" - Not today...">
  <meta property="og:type" content="article">
  

</head>

  <body>
    <div class="container">
    <header>
  <h1 id="site-title"><a href="http://ixday.github.io/">Not today...</a></h1>
  <nav id="menu">
    <ul>
      
        
          <li><a href="https://github.com/IxDay">github</a></li>
        
      
      
      
      <li><a href="/categories/os">os</a></li>
      
      <li><a href="/categories/project">project</a></li>
      
      <li><a href="/categories/snippet">snippet</a></li>
      
      <li><a href="/categories/tuto">tuto</a></li>
      
      
    </ul>
  </nav>
</header>

    
    <div class="contents">
      
<article>
  <div class="meta">
  <time class="date">
    
    Mon Jan 1 0001
    
  </time>
  <div class="comments">
    <a href="http://ixday.github.io/code/microframework_in_go/part_02/vendor/src/github.com/julienschmidt/httprouter/readme/#disqus_thread">
      <span class="disqus-comment-count" data-disqus-identifier="IxDay">
      </span>
      comments
    </a>
  </div>
  <p class="categories">
  
  </p>
</div>

  <div class="caption">
    <header>
      <h2></h2>

      

    </header>
    

<h1 id="httprouter-build-status-https-travis-ci-org-julienschmidt-httprouter-svg-branch-master-https-travis-ci-org-julienschmidt-httprouter-coverage-status-https-coveralls-io-repos-github-julienschmidt-httprouter-badge-svg-branch-master-https-coveralls-io-github-julienschmidt-httprouter-branch-master-godoc-https-godoc-org-github-com-julienschmidt-httprouter-status-svg-http-godoc-org-github-com-julienschmidt-httprouter">HttpRouter <a href="https://travis-ci.org/julienschmidt/httprouter"><img src="https://travis-ci.org/julienschmidt/httprouter.svg?branch=master" alt="Build Status" /></a> <a href="https://coveralls.io/github/julienschmidt/httprouter?branch=master"><img src="https://coveralls.io/repos/github/julienschmidt/httprouter/badge.svg?branch=master" alt="Coverage Status" /></a> <a href="http://godoc.org/github.com/julienschmidt/httprouter"><img src="https://godoc.org/github.com/julienschmidt/httprouter?status.svg" alt="GoDoc" /></a></h1>

<p>HttpRouter is a lightweight high performance HTTP request router (also called <em>multiplexer</em> or just <em>mux</em> for short) for <a href="https://golang.org/">Go</a>.</p>

<p>In contrast to the <a href="https://golang.org/pkg/net/http/#ServeMux">default mux</a> of Go&rsquo;s <code>net/http</code> package, this router supports variables in the routing pattern and matches against the request method. It also scales better.</p>

<p>The router is optimized for high performance and a small memory footprint. It scales well even with very long paths and a large number of routes. A compressing dynamic trie (radix tree) structure is used for efficient matching.</p>

<h2 id="features">Features</h2>

<p><strong>Only explicit matches:</strong> With other routers, like <a href="https://golang.org/pkg/net/http/#ServeMux"><code>http.ServeMux</code></a>, a requested URL path could match multiple patterns. Therefore they have some awkward pattern priority rules, like <em>longest match</em> or <em>first registered, first matched</em>. By design of this router, a request can only match exactly one or no route. As a result, there are also no unintended matches, which makes it great for SEO and improves the user experience.</p>

<p><strong>Stop caring about trailing slashes:</strong> Choose the URL style you like, the router automatically redirects the client if a trailing slash is missing or if there is one extra. Of course it only does so, if the new path has a handler. If you don&rsquo;t like it, you can <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.RedirectTrailingSlash">turn off this behavior</a>.</p>

<p><strong>Path auto-correction:</strong> Besides detecting the missing or additional trailing slash at no extra cost, the router can also fix wrong cases and remove superfluous path elements (like <code>../</code> or <code>//</code>). Is <a href="http://www.urbandictionary.com/define.php?term=Captain+Caps+Lock">CAPTAIN CAPS LOCK</a> one of your users? HttpRouter can help him by making a case-insensitive look-up and redirecting him to the correct URL.</p>

<p><strong>Parameters in your routing pattern:</strong> Stop parsing the requested URL path, just give the path segment a name and the router delivers the dynamic value to you. Because of the design of the router, path parameters are very cheap.</p>

<p><strong>Zero Garbage:</strong> The matching and dispatching process generates zero bytes of garbage. The only heap allocations that are made are building the slice of the key-value pairs for path parameters, and building new context and request objects (the latter only in the standard <code>Handler</code>/<code>HandlerFunc</code> api). In the 3-argument API, if the request path contains no parameters not a single heap allocation is necessary.</p>

<p><strong>Best Performance:</strong> <a href="https://github.com/julienschmidt/go-http-routing-benchmark">Benchmarks speak for themselves</a>. See below for technical details of the implementation.</p>

<p><strong>No more server crashes:</strong> You can set a <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.PanicHandler">Panic handler</a> to deal with panics occurring during handling a HTTP request. The router then recovers and lets the <code>PanicHandler</code> log what happened and deliver a nice error page.</p>

<p><strong>Perfect for APIs:</strong> The router design encourages to build sensible, hierarchical RESTful APIs. Moreover it has builtin native support for <a href="http://zacstewart.com/2012/04/14/http-options-method.html">OPTIONS requests</a> and <code>405 Method Not Allowed</code> replies.</p>

<p>Of course you can also set <strong>custom <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.NotFound"><code>NotFound</code></a> and  <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.MethodNotAllowed"><code>MethodNotAllowed</code></a> handlers</strong> and <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.ServeFiles"><strong>serve static files</strong></a>.</p>

<h2 id="usage">Usage</h2>

<p>This is just a quick introduction, view the <a href="http://godoc.org/github.com/julienschmidt/httprouter">GoDoc</a> for details.</p>

<p>Let&rsquo;s start with a trivial example:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&quot;fmt&quot;</span>
    <span class="s">&quot;github.com/julienschmidt/httprouter&quot;</span>
    <span class="s">&quot;net/http&quot;</span>
    <span class="s">&quot;log&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">Index</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">_</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">Params</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprint</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&quot;Welcome!\n&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">Hello</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">ps</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">Params</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&quot;hello, %s!\n&quot;</span><span class="p">,</span> <span class="nx">ps</span><span class="p">.</span><span class="nx">ByName</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">router</span> <span class="o">:=</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">New</span><span class="p">()</span>
    <span class="nx">router</span><span class="p">.</span><span class="nx">GET</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="nx">Index</span><span class="p">)</span>
    <span class="nx">router</span><span class="p">.</span><span class="nx">GET</span><span class="p">(</span><span class="s">&quot;/hello/:name&quot;</span><span class="p">,</span> <span class="nx">Hello</span><span class="p">)</span>

    <span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">&quot;:8080&quot;</span><span class="p">,</span> <span class="nx">router</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="named-parameters">Named parameters</h3>

<p>As you can see, <code>:name</code> is a <em>named parameter</em>. The values are accessible via <code>httprouter.Params</code>, which is just a slice of <code>httprouter.Param</code>s. You can get the value of a parameter either by its index in the slice, or by using the <code>ByName(name)</code> method: <code>:name</code> can be retrived by <code>ByName(&quot;name&quot;)</code>.</p>

<p>Named parameters only match a single path segment:</p>

<pre><code>Pattern: /user/:user

 /user/gordon              match
 /user/you                 match
 /user/gordon/profile      no match
 /user/                    no match
</code></pre>

<p><strong>Note:</strong> Since this router has only explicit matches, you can not register static routes and parameters for the same path segment. For example you can not register the patterns <code>/user/new</code> and <code>/user/:user</code> for the same request method at the same time. The routing of different request methods is independent from each other.</p>

<h3 id="catch-all-parameters">Catch-All parameters</h3>

<p>The second type are <em>catch-all</em> parameters and have the form <code>*name</code>. Like the name suggests, they match everything. Therefore they must always be at the <strong>end</strong> of the pattern:</p>

<pre><code>Pattern: /src/*filepath

 /src/                     match
 /src/somefile.go          match
 /src/subdir/somefile.go   match
</code></pre>

<h2 id="how-does-it-work">How does it work?</h2>

<p>The router relies on a tree structure which makes heavy use of <em>common prefixes</em>, it is basically a <em>compact</em> <a href="https://en.wikipedia.org/wiki/Trie"><em>prefix tree</em></a> (or just <a href="https://en.wikipedia.org/wiki/Radix_tree"><em>Radix tree</em></a>). Nodes with a common prefix also share a common parent. Here is a short example what the routing tree for the <code>GET</code> request method could look like:</p>

<pre><code>Priority   Path             Handle
9          \                *&lt;1&gt;
3          ├s               nil
2          |├earch\         *&lt;2&gt;
1          |└upport\        *&lt;3&gt;
2          ├blog\           *&lt;4&gt;
1          |    └:post      nil
1          |         └\     *&lt;5&gt;
2          ├about-us\       *&lt;6&gt;
1          |        └team\  *&lt;7&gt;
1          └contact\        *&lt;8&gt;
</code></pre>

<p>Every <code>*&lt;num&gt;</code> represents the memory address of a handler function (a pointer). If you follow a path trough the tree from the root to the leaf, you get the complete route path, e.g <code>\blog\:post\</code>, where <code>:post</code> is just a placeholder (<a href="#named-parameters"><em>parameter</em></a>) for an actual post name. Unlike hash-maps, a tree structure also allows us to use dynamic parts like the <code>:post</code> parameter, since we actually match against the routing patterns instead of just comparing hashes. <a href="https://github.com/julienschmidt/go-http-routing-benchmark">As benchmarks show</a>, this works very well and efficient.</p>

<p>Since URL paths have a hierarchical structure and make use only of a limited set of characters (byte values), it is very likely that there are a lot of common prefixes. This allows us to easily reduce the routing into ever smaller problems. Moreover the router manages a separate tree for every request method. For one thing it is more space efficient than holding a method-&gt;handle map in every single node, it also allows us to greatly reduce the routing problem before even starting the look-up in the prefix-tree.</p>

<p>For even better scalability, the child nodes on each tree level are ordered by priority, where the priority is just the number of handles registered in sub nodes (children, grandchildren, and so on..). This helps in two ways:</p>

<ol>
<li>Nodes which are part of the most routing paths are evaluated first. This helps to make as much routes as possible to be reachable as fast as possible.</li>
<li>It is some sort of cost compensation. The longest reachable path (highest cost) can always be evaluated first. The following scheme visualizes the tree structure. Nodes are evaluated from top to bottom and from left to right.</li>
</ol>

<pre><code>├------------
├---------
├-----
├----
├--
├--
└-
</code></pre>

<h2 id="why-doesn-t-this-work-with-http-handler">Why doesn&rsquo;t this work with <code>http.Handler</code>?</h2>

<p><strong>It does!</strong> The router itself implements the <code>http.Handler</code> interface. Moreover the router provides convenient <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.Handler">adapters for <code>http.Handler</code></a>s and <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.HandlerFunc"><code>http.HandlerFunc</code></a>s which allows them to be used as a <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.Handle"><code>httprouter.Handle</code></a> when registering a route. The only disadvantage is, that no parameter values can be retrieved when a <code>http.Handler</code> or <code>http.HandlerFunc</code> is used, since there is no efficient way to pass the values with the existing function parameters. Therefore <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.Handle"><code>httprouter.Handle</code></a> has a third function parameter.</p>

<p>Just try it out for yourself, the usage of HttpRouter is very straightforward. The package is compact and minimalistic, but also probably one of the easiest routers to set up.</p>

<h2 id="where-can-i-find-middleware-x">Where can I find Middleware <em>X</em>?</h2>

<p>This package just provides a very efficient request router with a few extra features. The router is just a <a href="https://golang.org/pkg/net/http/#Handler"><code>http.Handler</code></a>, you can chain any http.Handler compatible middleware before the router, for example the <a href="http://www.gorillatoolkit.org/pkg/handlers">Gorilla handlers</a>. Or you could <a href="https://justinas.org/writing-http-middleware-in-go/">just write your own</a>, it&rsquo;s very easy!</p>

<p>Alternatively, you could try <a href="#web-frameworks-based-on-httprouter">a web framework based on HttpRouter</a>.</p>

<h3 id="multi-domain-sub-domains">Multi-domain / Sub-domains</h3>

<p>Here is a quick example: Does your server serve multiple domains / hosts?
You want to use sub-domains?
Define a router per host!</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="c1">// We need an object that implements the http.Handler interface.</span>
<span class="c1">// Therefore we need a type for which we implement the ServeHTTP method.</span>
<span class="c1">// We just use a map here, in which we map host names (with port) to http.Handlers</span>
<span class="kd">type</span> <span class="nx">HostSwitch</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">http</span><span class="p">.</span><span class="nx">Handler</span>

<span class="c1">// Implement the ServeHTTP method on our new type</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">hs</span> <span class="nx">HostSwitch</span><span class="p">)</span> <span class="nx">ServeHTTP</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// Check if a http.Handler is registered for the given host.</span>
	<span class="c1">// If yes, use it to handle the request.</span>
	<span class="k">if</span> <span class="nx">handler</span> <span class="o">:=</span> <span class="nx">hs</span><span class="p">[</span><span class="nx">r</span><span class="p">.</span><span class="nx">Host</span><span class="p">];</span> <span class="nx">handler</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">handler</span><span class="p">.</span><span class="nx">ServeHTTP</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="c1">// Handle host names for which no handler is registered</span>
		<span class="nx">http</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&quot;Forbidden&quot;</span><span class="p">,</span> <span class="mi">403</span><span class="p">)</span> <span class="c1">// Or Redirect?</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// Initialize a router as usual</span>
	<span class="nx">router</span> <span class="o">:=</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">New</span><span class="p">()</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">GET</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="nx">Index</span><span class="p">)</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">GET</span><span class="p">(</span><span class="s">&quot;/hello/:name&quot;</span><span class="p">,</span> <span class="nx">Hello</span><span class="p">)</span>

	<span class="c1">// Make a new HostSwitch and insert the router (our http handler)</span>
	<span class="c1">// for example.com and port 12345</span>
	<span class="nx">hs</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="nx">HostSwitch</span><span class="p">)</span>
	<span class="nx">hs</span><span class="p">[</span><span class="s">&quot;example.com:12345&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="nx">router</span>

	<span class="c1">// Use the HostSwitch to listen and serve on port 12345</span>
	<span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">&quot;:12345&quot;</span><span class="p">,</span> <span class="nx">hs</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="basic-authentication">Basic Authentication</h3>

<p>Another quick example: Basic Authentication (RFC 2617) for handles:</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&quot;fmt&quot;</span>
	<span class="s">&quot;log&quot;</span>
	<span class="s">&quot;net/http&quot;</span>

	<span class="s">&quot;github.com/julienschmidt/httprouter&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">BasicAuth</span><span class="p">(</span><span class="nx">h</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">Handle</span><span class="p">,</span> <span class="nx">requiredUser</span><span class="p">,</span> <span class="nx">requiredPassword</span> <span class="kt">string</span><span class="p">)</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">Handle</span> <span class="p">{</span>
	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">ps</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">Params</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// Get the Basic Authentication credentials</span>
		<span class="nx">user</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">hasAuth</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nx">BasicAuth</span><span class="p">()</span>

		<span class="k">if</span> <span class="nx">hasAuth</span> <span class="o">&amp;&amp;</span> <span class="nx">user</span> <span class="o">==</span> <span class="nx">requiredUser</span> <span class="o">&amp;&amp;</span> <span class="nx">password</span> <span class="o">==</span> <span class="nx">requiredPassword</span> <span class="p">{</span>
			<span class="c1">// Delegate request to the given handle</span>
			<span class="nx">h</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">ps</span><span class="p">)</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="c1">// Request Basic Authentication otherwise</span>
			<span class="nx">w</span><span class="p">.</span><span class="nx">Header</span><span class="p">().</span><span class="nx">Set</span><span class="p">(</span><span class="s">&quot;WWW-Authenticate&quot;</span><span class="p">,</span> <span class="s">&quot;Basic realm=Restricted&quot;</span><span class="p">)</span>
			<span class="nx">http</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">http</span><span class="p">.</span><span class="nx">StatusText</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusUnauthorized</span><span class="p">),</span> <span class="nx">http</span><span class="p">.</span><span class="nx">StatusUnauthorized</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">Index</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">_</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">Params</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprint</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&quot;Not protected!\n&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">Protected</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">_</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">Params</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprint</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&quot;Protected!\n&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">user</span> <span class="o">:=</span> <span class="s">&quot;gordon&quot;</span>
	<span class="nx">pass</span> <span class="o">:=</span> <span class="s">&quot;secret!&quot;</span>

	<span class="nx">router</span> <span class="o">:=</span> <span class="nx">httprouter</span><span class="p">.</span><span class="nx">New</span><span class="p">()</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">GET</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="nx">Index</span><span class="p">)</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">GET</span><span class="p">(</span><span class="s">&quot;/protected/&quot;</span><span class="p">,</span> <span class="nx">BasicAuth</span><span class="p">(</span><span class="nx">Protected</span><span class="p">,</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">pass</span><span class="p">))</span>

	<span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">&quot;:8080&quot;</span><span class="p">,</span> <span class="nx">router</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="chaining-with-the-notfound-handler">Chaining with the NotFound handler</h2>

<p><strong>NOTE: It might be required to set <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.HandleMethodNotAllowed"><code>Router.HandleMethodNotAllowed</code></a> to <code>false</code> to avoid problems.</strong></p>

<p>You can use another <a href="https://golang.org/pkg/net/http/#Handler"><code>http.Handler</code></a>, for example another router, to handle requests which could not be matched by this router by using the <a href="https://godoc.org/github.com/julienschmidt/httprouter#Router.NotFound"><code>Router.NotFound</code></a> handler. This allows chaining.</p>

<h3 id="static-files">Static files</h3>

<p>The <code>NotFound</code> handler can for example be used to serve static files from the root path <code>/</code> (like an <code>index.html</code> file along with other assets):</p>
<div class="highlight"><pre><code class="language-go" data-lang="go"><span></span><span class="c1">// Serve static files from the ./public directory</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">NotFound</span> <span class="p">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">FileServer</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">Dir</span><span class="p">(</span><span class="s">&quot;public&quot;</span><span class="p">))</span>
</code></pre></div>

<p>But this approach sidesteps the strict core rules of this router to avoid routing problems. A cleaner approach is to use a distinct sub-path for serving files, like <code>/static/*filepath</code> or <code>/files/*filepath</code>.</p>

<h2 id="web-frameworks-based-on-httprouter">Web Frameworks based on HttpRouter</h2>

<p>If the HttpRouter is a bit too minimalistic for you, you might try one of the following more high-level 3rd-party web frameworks building upon the HttpRouter package:</p>

<ul>
<li><a href="https://github.com/plimble/ace">Ace</a>: Blazing fast Go Web Framework</li>
<li><a href="https://github.com/manyminds/api2go">api2go</a>: A JSON API Implementation for Go</li>
<li><a href="https://github.com/gin-gonic/gin">Gin</a>: Features a martini-like API with much better performance</li>
<li><a href="https://github.com/bahlo/goat">Goat</a>: A minimalistic REST API server in Go</li>
<li><a href="https://github.com/TobiEiss/goMiddlewareChain">goMiddlewareChain</a>: An express.js-like-middleware-chain</li>
<li><a href="https://github.com/najeira/hikaru">Hikaru</a>: Supports standalone and Google AppEngine</li>
<li><a href="https://github.com/nbio/hitch">Hitch</a>: Hitch ties httprouter, <a href="https://github.com/nbio/httpcontext">httpcontext</a>, and middleware up in a bow</li>
<li><a href="https://github.com/corneldamian/httpway">httpway</a>: Simple middleware extension with context for httprouter and a server with gracefully shutdown support</li>
<li><a href="https://github.com/guregu/kami">kami</a>: A tiny web framework using x/net/context</li>
<li><a href="https://github.com/imdario/medeina">Medeina</a>: Inspired by Ruby&rsquo;s Roda and Cuba</li>
<li><a href="https://github.com/rocwong/neko">Neko</a>: A lightweight web application framework for Golang</li>
<li><a href="https://github.com/abiosoft/river">River</a>: River is a simple and lightweight REST server</li>
<li><a href="https://github.com/iamthemuffinman/Roxanna">Roxanna</a>: An amalgamation of httprouter, better logging, and hot reload</li>
<li><a href="https://github.com/VividCortex/siesta">siesta</a>: Composable HTTP handlers with contexts</li>
<li><a href="https://github.com/rs/xmux">xmux</a>: xmux is a httprouter fork on top of xhandler (net/context aware)</li>
</ul>

  </div>
</article>
<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "IxDay" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
    

    <footer id="footer">
	<p>&copy; 2018 IxDay</p>
	<p>Done with love... and beer</p>
  <p>Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>,</p>
</footer>

    </div>
  </body>
</html>
